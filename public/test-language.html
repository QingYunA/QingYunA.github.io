<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¯­è¨€æ£€æµ‹æµ‹è¯• - Language Detection Test</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem;
            line-height: 1.6;
        }
        .test-section {
            background: #f5f5f5;
            padding: 1.5rem;
            margin: 1rem 0;
            border-radius: 8px;
            border-left: 4px solid #007acc;
        }
        .code {
            background: #2d3748;
            color: #e2e8f0;
            padding: 1rem;
            border-radius: 4px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 0.9rem;
            overflow-x: auto;
        }
        .button {
            background: #007acc;
            color: white;
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin: 0.5rem;
        }
        .button:hover {
            background: #005a9e;
        }
    </style>
</head>
<body>
    <h1>ğŸŒ åšå®¢è‡ªåŠ¨è¯­è¨€åˆ‡æ¢åŠŸèƒ½æµ‹è¯•</h1>
    
    <div class="test-section">
        <h2>âœ… åŠŸèƒ½å·²æˆåŠŸå®ç°ï¼</h2>
        <p><strong>è‡ªåŠ¨è¯­è¨€æ£€æµ‹å’Œåˆ‡æ¢åŠŸèƒ½ç°åœ¨å·²ç»å®Œå…¨é›†æˆåˆ°ä½ çš„åšå®¢ä¸­äº†ã€‚</strong></p>
    </div>

    <div class="test-section">
        <h2>ğŸ”§ å·¥ä½œåŸç†</h2>
        <ol>
            <li><strong>æµè§ˆå™¨è¯­è¨€æ£€æµ‹</strong>ï¼šæ£€æµ‹ç”¨æˆ·æµè§ˆå™¨çš„é¦–é€‰è¯­è¨€è®¾ç½®</li>
            <li><strong>æ™ºèƒ½åŒ¹é…</strong>ï¼šå°†æµè§ˆå™¨è¯­è¨€æ˜ å°„åˆ°æ”¯æŒçš„è¯­è¨€ï¼ˆä¸­æ–‡/è‹±æ–‡ï¼‰</li>
            <li><strong>é¦–æ¬¡è®¿é—®é‡å®šå‘</strong>ï¼šä»…åœ¨ç”¨æˆ·é¦–æ¬¡è®¿é—®é¦–é¡µæ—¶è‡ªåŠ¨é‡å®šå‘</li>
            <li><strong>ç”¨æˆ·åå¥½è®°å¿†</strong>ï¼šä¸€æ—¦ç”¨æˆ·æ‰‹åŠ¨é€‰æ‹©è¯­è¨€ï¼Œä¼šä¿å­˜åå¥½åˆ° localStorage</li>
            <li><strong>å°Šé‡ç”¨æˆ·é€‰æ‹©</strong>ï¼šä¸ä¼šè¦†ç›–ç”¨æˆ·çš„æ‰‹åŠ¨è¯­è¨€é€‰æ‹©</li>
        </ol>
    </div>

    <div class="test-section">
        <h2>ğŸ§ª æµ‹è¯•æ–¹æ³•</h2>
        
        <h3>æ–¹æ³•1: æ¸…é™¤æµè§ˆå™¨æ•°æ®æµ‹è¯•</h3>
        <ol>
            <li>æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…· (F12)</li>
            <li>è¿›å…¥ Application/åº”ç”¨ç¨‹åº æ ‡ç­¾</li>
            <li>åœ¨å·¦ä¾§æ‰¾åˆ° Local Storage</li>
            <li>åˆ é™¤ <code>preferred-language</code> é”®</li>
            <li>åˆ·æ–°é¡µé¢ï¼Œè§‚å¯Ÿæ˜¯å¦æ ¹æ®æµè§ˆå™¨è¯­è¨€è‡ªåŠ¨é‡å®šå‘</li>
        </ol>

        <h3>æ–¹æ³•2: ä¿®æ”¹æµè§ˆå™¨è¯­è¨€è®¾ç½®</h3>
        <ol>
            <li>Chrome: è®¾ç½® â†’ é«˜çº§ â†’ è¯­è¨€</li>
            <li>Firefox: è®¾ç½® â†’ å¸¸è§„ â†’ è¯­è¨€</li>
            <li>Safari: åå¥½è®¾ç½® â†’ é«˜çº§ â†’ è¯­è¨€</li>
            <li>å°†è‹±æ–‡è®¾ä¸ºé¦–é€‰è¯­è¨€ï¼Œç„¶åè®¿é—®åšå®¢é¦–é¡µ</li>
            <li>å°†ä¸­æ–‡è®¾ä¸ºé¦–é€‰è¯­è¨€ï¼Œç„¶åæ¸…é™¤æ•°æ®å†è®¿é—®</li>
        </ol>

        <h3>æ–¹æ³•3: ä½¿ç”¨æ§åˆ¶å°æµ‹è¯•</h3>
        <div class="code">
// æ¸…é™¤ç”¨æˆ·åå¥½
localStorage.removeItem('preferred-language');

// æ£€æŸ¥å½“å‰æµè§ˆå™¨è¯­è¨€
console.log('æµè§ˆå™¨è¯­è¨€:', navigator.languages);

// æ‰‹åŠ¨è§¦å‘è¯­è¨€æ£€æµ‹é€»è¾‘
console.log('å½“å‰é¡µé¢è¯­è¨€:', window.location.pathname.startsWith('/en/') ? 'en' : 'zh_CN');
        </div>
    </div>

    <div class="test-section">
        <h2>ğŸ“‹ æ”¯æŒçš„è¯­è¨€æ˜ å°„</h2>
        <ul>
            <li><strong>ä¸­æ–‡</strong>: zh, zh-CN, zh-cn, zh-Hans, zh-hans â†’ zh_CN</li>
            <li><strong>è‹±æ–‡</strong>: en, en-US, en-us, en-GB, en-gb â†’ en</li>
            <li><strong>é»˜è®¤</strong>: å…¶ä»–æ‰€æœ‰è¯­è¨€ â†’ zh_CN (ä¸­æ–‡)</li>
        </ul>
    </div>

    <div class="test-section">
        <h2>ğŸ¯ æµ‹è¯•åœºæ™¯</h2>
        
        <h3>âœ… åº”è¯¥è‡ªåŠ¨é‡å®šå‘çš„æƒ…å†µï¼š</h3>
        <ul>
            <li>é¦–æ¬¡è®¿é—®åšå®¢é¦–é¡µ (<code>/</code>)</li>
            <li>æ²¡æœ‰ä¿å­˜çš„è¯­è¨€åå¥½</li>
            <li>æµè§ˆå™¨è¯­è¨€ä¸å½“å‰é¡µé¢è¯­è¨€ä¸åŒ¹é…</li>
        </ul>

        <h3>âŒ ä¸åº”è¯¥é‡å®šå‘çš„æƒ…å†µï¼š</h3>
        <ul>
            <li>ç”¨æˆ·å·²æ‰‹åŠ¨é€‰æ‹©è¿‡è¯­è¨€ï¼ˆlocalStorage ä¸­æœ‰åå¥½ï¼‰</li>
            <li>è®¿é—®çš„ä¸æ˜¯é¦–é¡µï¼ˆå¦‚ <code>/posts/xxx</code>ï¼‰</li>
            <li>æµè§ˆå™¨è¯­è¨€ä¸å½“å‰é¡µé¢è¯­è¨€å·²åŒ¹é…</li>
        </ul>
    </div>

    <div class="test-section">
        <h2>ğŸš€ å¿«é€Ÿæµ‹è¯•æŒ‰é’®</h2>
        <button class="button" onclick="clearPreference()">æ¸…é™¤è¯­è¨€åå¥½</button>
        <button class="button" onclick="checkStatus()">æ£€æŸ¥å½“å‰çŠ¶æ€</button>
        <button class="button" onclick="simulateEnglish()">æ¨¡æ‹Ÿè‹±æ–‡ç”¨æˆ·</button>
        <button class="button" onclick="simulateChinese()">æ¨¡æ‹Ÿä¸­æ–‡ç”¨æˆ·</button>
        
        <div id="status" style="margin-top: 1rem; padding: 1rem; background: #e7f3ff; border-radius: 4px;"></div>
    </div>

    <script>
        function clearPreference() {
            localStorage.removeItem('preferred-language');
            updateStatus('âœ… å·²æ¸…é™¤è¯­è¨€åå¥½ï¼Œä¸‹æ¬¡è®¿é—®é¦–é¡µå°†è‡ªåŠ¨æ£€æµ‹æµè§ˆå™¨è¯­è¨€');
        }

        function checkStatus() {
            const preference = localStorage.getItem('preferred-language');
            const browserLangs = navigator.languages.join(', ');
            const currentLang = window.location.pathname.startsWith('/en/') ? 'English' : 'Chinese';
            
            updateStatus(`
                <strong>å½“å‰çŠ¶æ€ï¼š</strong><br>
                ğŸ“± æµè§ˆå™¨è¯­è¨€: ${browserLangs}<br>
                ğŸ’¾ ä¿å­˜çš„åå¥½: ${preference || 'æ— '}<br>
                ğŸŒ å½“å‰é¡µé¢è¯­è¨€: ${currentLang}<br>
                ğŸ”„ ä¸‹æ¬¡è®¿é—®é¦–é¡µä¼šé‡å®šå‘: ${!preference ? 'æ˜¯' : 'å¦'}
            `);
        }

        function simulateEnglish() {
            updateStatus('ğŸ”§ è¦æ¨¡æ‹Ÿè‹±æ–‡ç”¨æˆ·ï¼Œè¯·ï¼š<br>1. ç‚¹å‡»"æ¸…é™¤è¯­è¨€åå¥½"<br>2. å°†æµè§ˆå™¨è¯­è¨€è®¾ä¸ºè‹±æ–‡<br>3. è®¿é—®åšå®¢é¦–é¡µ');
        }

        function simulateChinese() {
            updateStatus('ğŸ”§ è¦æ¨¡æ‹Ÿä¸­æ–‡ç”¨æˆ·ï¼Œè¯·ï¼š<br>1. ç‚¹å‡»"æ¸…é™¤è¯­è¨€åå¥½"<br>2. å°†æµè§ˆå™¨è¯­è¨€è®¾ä¸ºä¸­æ–‡<br>3. è®¿é—®åšå®¢é¦–é¡µ');
        }

        function updateStatus(message) {
            document.getElementById('status').innerHTML = message;
        }

        // é¡µé¢åŠ è½½æ—¶æ˜¾ç¤ºå½“å‰çŠ¶æ€
        window.onload = checkStatus;
    </script>

    <div class="test-section">
        <h2>ğŸ‰ æ­å–œï¼</h2>
        <p>ä½ çš„åšå®¢ç°åœ¨å…·å¤‡äº†æ™ºèƒ½çš„è‡ªåŠ¨è¯­è¨€åˆ‡æ¢åŠŸèƒ½ï¼è®¿å®¢ä¼šæ ¹æ®ä»–ä»¬çš„æµè§ˆå™¨è¯­è¨€åå¥½è‡ªåŠ¨çœ‹åˆ°åˆé€‚çš„è¯­è¨€ç‰ˆæœ¬ã€‚</p>
        <p><a href="/" style="color: #007acc;">â† è¿”å›åšå®¢é¦–é¡µæµ‹è¯•</a></p>
    </div>
</body>
</html>
